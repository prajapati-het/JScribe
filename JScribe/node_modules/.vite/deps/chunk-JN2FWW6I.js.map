{
  "version": 3,
  "sources": ["../../@codemirror/legacy-modes/mode/smalltalk.js"],
  "sourcesContent": ["var specialChars = /[+\\-\\/\\\\*~<>=@%|&?!.,:;^]/;\r\nvar keywords = /true|false|nil|self|super|thisContext/;\r\n\r\nvar Context = function(tokenizer, parent) {\r\n  this.next = tokenizer;\r\n  this.parent = parent;\r\n};\r\n\r\nvar Token = function(name, context, eos) {\r\n  this.name = name;\r\n  this.context = context;\r\n  this.eos = eos;\r\n};\r\n\r\nvar State = function() {\r\n  this.context = new Context(next, null);\r\n  this.expectVariable = true;\r\n  this.indentation = 0;\r\n  this.userIndentationDelta = 0;\r\n};\r\n\r\nState.prototype.userIndent = function(indentation, indentUnit) {\r\n  this.userIndentationDelta = indentation > 0 ? (indentation / indentUnit - this.indentation) : 0;\r\n};\r\n\r\nvar next = function(stream, context, state) {\r\n  var token = new Token(null, context, false);\r\n  var aChar = stream.next();\r\n\r\n  if (aChar === '\"') {\r\n    token = nextComment(stream, new Context(nextComment, context));\r\n\r\n  } else if (aChar === '\\'') {\r\n    token = nextString(stream, new Context(nextString, context));\r\n\r\n  } else if (aChar === '#') {\r\n    if (stream.peek() === '\\'') {\r\n      stream.next();\r\n      token = nextSymbol(stream, new Context(nextSymbol, context));\r\n    } else {\r\n      if (stream.eatWhile(/[^\\s.{}\\[\\]()]/))\r\n        token.name = 'string.special';\r\n      else\r\n        token.name = 'meta';\r\n    }\r\n\r\n  } else if (aChar === '$') {\r\n    if (stream.next() === '<') {\r\n      stream.eatWhile(/[^\\s>]/);\r\n      stream.next();\r\n    }\r\n    token.name = 'string.special';\r\n\r\n  } else if (aChar === '|' && state.expectVariable) {\r\n    token.context = new Context(nextTemporaries, context);\r\n\r\n  } else if (/[\\[\\]{}()]/.test(aChar)) {\r\n    token.name = 'bracket';\r\n    token.eos = /[\\[{(]/.test(aChar);\r\n\r\n    if (aChar === '[') {\r\n      state.indentation++;\r\n    } else if (aChar === ']') {\r\n      state.indentation = Math.max(0, state.indentation - 1);\r\n    }\r\n\r\n  } else if (specialChars.test(aChar)) {\r\n    stream.eatWhile(specialChars);\r\n    token.name = 'operator';\r\n    token.eos = aChar !== ';'; // ; cascaded message expression\r\n\r\n  } else if (/\\d/.test(aChar)) {\r\n    stream.eatWhile(/[\\w\\d]/);\r\n    token.name = 'number';\r\n\r\n  } else if (/[\\w_]/.test(aChar)) {\r\n    stream.eatWhile(/[\\w\\d_]/);\r\n    token.name = state.expectVariable ? (keywords.test(stream.current()) ? 'keyword' : 'variable') : null;\r\n\r\n  } else {\r\n    token.eos = state.expectVariable;\r\n  }\r\n\r\n  return token;\r\n};\r\n\r\nvar nextComment = function(stream, context) {\r\n  stream.eatWhile(/[^\"]/);\r\n  return new Token('comment', stream.eat('\"') ? context.parent : context, true);\r\n};\r\n\r\nvar nextString = function(stream, context) {\r\n  stream.eatWhile(/[^']/);\r\n  return new Token('string', stream.eat('\\'') ? context.parent : context, false);\r\n};\r\n\r\nvar nextSymbol = function(stream, context) {\r\n  stream.eatWhile(/[^']/);\r\n  return new Token('string.special', stream.eat('\\'') ? context.parent : context, false);\r\n};\r\n\r\nvar nextTemporaries = function(stream, context) {\r\n  var token = new Token(null, context, false);\r\n  var aChar = stream.next();\r\n\r\n  if (aChar === '|') {\r\n    token.context = context.parent;\r\n    token.eos = true;\r\n\r\n  } else {\r\n    stream.eatWhile(/[^|]/);\r\n    token.name = 'variable';\r\n  }\r\n\r\n  return token;\r\n};\r\n\r\nexport const smalltalk = {\r\n  name: \"smalltalk\",\r\n\r\n  startState: function() {\r\n    return new State;\r\n  },\r\n\r\n  token: function(stream, state) {\r\n    state.userIndent(stream.indentation(), stream.indentUnit);\r\n\r\n    if (stream.eatSpace()) {\r\n      return null;\r\n    }\r\n\r\n    var token = state.context.next(stream, state.context, state);\r\n    state.context = token.context;\r\n    state.expectVariable = token.eos;\r\n\r\n    return token.name;\r\n  },\r\n\r\n  blankLine: function(state, indentUnit) {\r\n    state.userIndent(0, indentUnit);\r\n  },\r\n\r\n  indent: function(state, textAfter, cx) {\r\n    var i = state.context.next === next && textAfter && textAfter.charAt(0) === ']' ? -1 : state.userIndentationDelta;\r\n    return (state.indentation + i) * cx.unit;\r\n  },\r\n\r\n  languageData: {\r\n    indentOnInput: /^\\s*\\]$/\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
