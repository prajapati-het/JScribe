{
  "version": 3,
  "sources": ["../../@codemirror/legacy-modes/mode/mumps.js"],
  "sourcesContent": ["function wordRegexp(words) {\r\n  return new RegExp(\"^((\" + words.join(\")|(\") + \"))\\\\b\", \"i\");\r\n}\r\n\r\nvar singleOperators = new RegExp(\"^[\\\\+\\\\-\\\\*/&#!_?\\\\\\\\<>=\\\\'\\\\[\\\\]]\");\r\nvar doubleOperators = new RegExp(\"^(('=)|(<=)|(>=)|('>)|('<)|([[)|(]])|(^$))\");\r\nvar singleDelimiters = new RegExp(\"^[\\\\.,:]\");\r\nvar brackets = new RegExp(\"[()]\");\r\nvar identifiers = new RegExp(\"^[%A-Za-z][A-Za-z0-9]*\");\r\nvar commandKeywords = [\"break\",\"close\",\"do\",\"else\",\"for\",\"goto\", \"halt\", \"hang\", \"if\", \"job\",\"kill\",\"lock\",\"merge\",\"new\",\"open\", \"quit\", \"read\", \"set\", \"tcommit\", \"trollback\", \"tstart\", \"use\", \"view\", \"write\", \"xecute\", \"b\",\"c\",\"d\",\"e\",\"f\",\"g\", \"h\", \"i\", \"j\",\"k\",\"l\",\"m\",\"n\",\"o\", \"q\", \"r\", \"s\", \"tc\", \"tro\", \"ts\", \"u\", \"v\", \"w\", \"x\"];\r\n// The following list includes intrinsic functions _and_ special variables\r\nvar intrinsicFuncsWords = [\"\\\\$ascii\", \"\\\\$char\", \"\\\\$data\", \"\\\\$ecode\", \"\\\\$estack\", \"\\\\$etrap\", \"\\\\$extract\", \"\\\\$find\", \"\\\\$fnumber\", \"\\\\$get\", \"\\\\$horolog\", \"\\\\$io\", \"\\\\$increment\", \"\\\\$job\", \"\\\\$justify\", \"\\\\$length\", \"\\\\$name\", \"\\\\$next\", \"\\\\$order\", \"\\\\$piece\", \"\\\\$qlength\", \"\\\\$qsubscript\", \"\\\\$query\", \"\\\\$quit\", \"\\\\$random\", \"\\\\$reverse\", \"\\\\$select\", \"\\\\$stack\", \"\\\\$test\", \"\\\\$text\", \"\\\\$translate\", \"\\\\$view\", \"\\\\$x\", \"\\\\$y\", \"\\\\$a\", \"\\\\$c\", \"\\\\$d\", \"\\\\$e\", \"\\\\$ec\", \"\\\\$es\", \"\\\\$et\", \"\\\\$f\", \"\\\\$fn\", \"\\\\$g\", \"\\\\$h\", \"\\\\$i\", \"\\\\$j\", \"\\\\$l\", \"\\\\$n\", \"\\\\$na\", \"\\\\$o\", \"\\\\$p\", \"\\\\$q\", \"\\\\$ql\", \"\\\\$qs\", \"\\\\$r\", \"\\\\$re\", \"\\\\$s\", \"\\\\$st\", \"\\\\$t\", \"\\\\$tr\", \"\\\\$v\", \"\\\\$z\"];\r\nvar intrinsicFuncs = wordRegexp(intrinsicFuncsWords);\r\nvar command = wordRegexp(commandKeywords);\r\n\r\nfunction tokenBase(stream, state) {\r\n  if (stream.sol()) {\r\n    state.label = true;\r\n    state.commandMode = 0;\r\n  }\r\n\r\n  // The <space> character has meaning in MUMPS. Ignoring consecutive\r\n  // spaces would interfere with interpreting whether the next non-space\r\n  // character belongs to the command or argument context.\r\n\r\n  // Examine each character and update a mode variable whose interpretation is:\r\n  //   >0 => command    0 => argument    <0 => command post-conditional\r\n  var ch = stream.peek();\r\n\r\n  if (ch == \" \" || ch == \"\\t\") { // Pre-process <space>\r\n    state.label = false;\r\n    if (state.commandMode == 0)\r\n      state.commandMode = 1;\r\n    else if ((state.commandMode < 0) || (state.commandMode == 2))\r\n      state.commandMode = 0;\r\n  } else if ((ch != \".\") && (state.commandMode > 0)) {\r\n    if (ch == \":\")\r\n      state.commandMode = -1;   // SIS - Command post-conditional\r\n    else\r\n      state.commandMode = 2;\r\n  }\r\n\r\n  // Do not color parameter list as line tag\r\n  if ((ch === \"(\") || (ch === \"\\u0009\"))\r\n    state.label = false;\r\n\r\n  // MUMPS comment starts with \";\"\r\n  if (ch === \";\") {\r\n    stream.skipToEnd();\r\n    return \"comment\";\r\n  }\r\n\r\n  // Number Literals // SIS/RLM - MUMPS permits canonic number followed by concatenate operator\r\n  if (stream.match(/^[-+]?\\d+(\\.\\d+)?([eE][-+]?\\d+)?/))\r\n    return \"number\";\r\n\r\n  // Handle Strings\r\n  if (ch == '\"') {\r\n    if (stream.skipTo('\"')) {\r\n      stream.next();\r\n      return \"string\";\r\n    } else {\r\n      stream.skipToEnd();\r\n      return \"error\";\r\n    }\r\n  }\r\n\r\n  // Handle operators and Delimiters\r\n  if (stream.match(doubleOperators) || stream.match(singleOperators))\r\n    return \"operator\";\r\n\r\n  // Prevents leading \".\" in DO block from falling through to error\r\n  if (stream.match(singleDelimiters))\r\n    return null;\r\n\r\n  if (brackets.test(ch)) {\r\n    stream.next();\r\n    return \"bracket\";\r\n  }\r\n\r\n  if (state.commandMode > 0 && stream.match(command))\r\n    return \"controlKeyword\";\r\n\r\n  if (stream.match(intrinsicFuncs))\r\n    return \"builtin\";\r\n\r\n  if (stream.match(identifiers))\r\n    return \"variable\";\r\n\r\n  // Detect dollar-sign when not a documented intrinsic function\r\n  // \"^\" may introduce a GVN or SSVN - Color same as function\r\n  if (ch === \"$\" || ch === \"^\") {\r\n    stream.next();\r\n    return \"builtin\";\r\n  }\r\n\r\n  // MUMPS Indirection\r\n  if (ch === \"@\") {\r\n    stream.next();\r\n    return \"string.special\";\r\n  }\r\n\r\n  if (/[\\w%]/.test(ch)) {\r\n    stream.eatWhile(/[\\w%]/);\r\n    return \"variable\";\r\n  }\r\n\r\n  // Handle non-detected items\r\n  stream.next();\r\n  return \"error\";\r\n}\r\n\r\nexport const mumps = {\r\n  name: \"mumps\",\r\n  startState: function() {\r\n    return {\r\n      label: false,\r\n      commandMode: 0\r\n    };\r\n  },\r\n\r\n  token: function(stream, state) {\r\n    var style = tokenBase(stream, state);\r\n    if (state.label) return \"tag\";\r\n    return style;\r\n  }\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
