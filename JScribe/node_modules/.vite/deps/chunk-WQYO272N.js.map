{
  "version": 3,
  "sources": ["../../@codemirror/legacy-modes/mode/lua.js"],
  "sourcesContent": ["function prefixRE(words) {\r\n  return new RegExp(\"^(?:\" + words.join(\"|\") + \")\", \"i\");\r\n}\r\nfunction wordRE(words) {\r\n  return new RegExp(\"^(?:\" + words.join(\"|\") + \")$\", \"i\");\r\n}\r\n\r\n// long list of standard functions from lua manual\r\nvar builtins = wordRE([\r\n  \"_G\",\"_VERSION\",\"assert\",\"collectgarbage\",\"dofile\",\"error\",\"getfenv\",\"getmetatable\",\"ipairs\",\"load\",\r\n  \"loadfile\",\"loadstring\",\"module\",\"next\",\"pairs\",\"pcall\",\"print\",\"rawequal\",\"rawget\",\"rawset\",\"require\",\r\n  \"select\",\"setfenv\",\"setmetatable\",\"tonumber\",\"tostring\",\"type\",\"unpack\",\"xpcall\",\r\n\r\n  \"coroutine.create\",\"coroutine.resume\",\"coroutine.running\",\"coroutine.status\",\"coroutine.wrap\",\"coroutine.yield\",\r\n\r\n  \"debug.debug\",\"debug.getfenv\",\"debug.gethook\",\"debug.getinfo\",\"debug.getlocal\",\"debug.getmetatable\",\r\n  \"debug.getregistry\",\"debug.getupvalue\",\"debug.setfenv\",\"debug.sethook\",\"debug.setlocal\",\"debug.setmetatable\",\r\n  \"debug.setupvalue\",\"debug.traceback\",\r\n\r\n  \"close\",\"flush\",\"lines\",\"read\",\"seek\",\"setvbuf\",\"write\",\r\n\r\n  \"io.close\",\"io.flush\",\"io.input\",\"io.lines\",\"io.open\",\"io.output\",\"io.popen\",\"io.read\",\"io.stderr\",\"io.stdin\",\r\n  \"io.stdout\",\"io.tmpfile\",\"io.type\",\"io.write\",\r\n\r\n  \"math.abs\",\"math.acos\",\"math.asin\",\"math.atan\",\"math.atan2\",\"math.ceil\",\"math.cos\",\"math.cosh\",\"math.deg\",\r\n  \"math.exp\",\"math.floor\",\"math.fmod\",\"math.frexp\",\"math.huge\",\"math.ldexp\",\"math.log\",\"math.log10\",\"math.max\",\r\n  \"math.min\",\"math.modf\",\"math.pi\",\"math.pow\",\"math.rad\",\"math.random\",\"math.randomseed\",\"math.sin\",\"math.sinh\",\r\n  \"math.sqrt\",\"math.tan\",\"math.tanh\",\r\n\r\n  \"os.clock\",\"os.date\",\"os.difftime\",\"os.execute\",\"os.exit\",\"os.getenv\",\"os.remove\",\"os.rename\",\"os.setlocale\",\r\n  \"os.time\",\"os.tmpname\",\r\n\r\n  \"package.cpath\",\"package.loaded\",\"package.loaders\",\"package.loadlib\",\"package.path\",\"package.preload\",\r\n  \"package.seeall\",\r\n\r\n  \"string.byte\",\"string.char\",\"string.dump\",\"string.find\",\"string.format\",\"string.gmatch\",\"string.gsub\",\r\n  \"string.len\",\"string.lower\",\"string.match\",\"string.rep\",\"string.reverse\",\"string.sub\",\"string.upper\",\r\n\r\n  \"table.concat\",\"table.insert\",\"table.maxn\",\"table.remove\",\"table.sort\"\r\n]);\r\nvar keywords = wordRE([\"and\",\"break\",\"elseif\",\"false\",\"nil\",\"not\",\"or\",\"return\",\r\n                       \"true\",\"function\", \"end\", \"if\", \"then\", \"else\", \"do\",\r\n                       \"while\", \"repeat\", \"until\", \"for\", \"in\", \"local\" ]);\r\n\r\nvar indentTokens = wordRE([\"function\", \"if\",\"repeat\",\"do\", \"\\\\(\", \"{\"]);\r\nvar dedentTokens = wordRE([\"end\", \"until\", \"\\\\)\", \"}\"]);\r\nvar dedentPartial = prefixRE([\"end\", \"until\", \"\\\\)\", \"}\", \"else\", \"elseif\"]);\r\n\r\nfunction readBracket(stream) {\r\n  var level = 0;\r\n  while (stream.eat(\"=\")) ++level;\r\n  stream.eat(\"[\");\r\n  return level;\r\n}\r\n\r\nfunction normal(stream, state) {\r\n  var ch = stream.next();\r\n  if (ch == \"-\" && stream.eat(\"-\")) {\r\n    if (stream.eat(\"[\") && stream.eat(\"[\"))\r\n      return (state.cur = bracketed(readBracket(stream), \"comment\"))(stream, state);\r\n    stream.skipToEnd();\r\n    return \"comment\";\r\n  }\r\n  if (ch == \"\\\"\" || ch == \"'\")\r\n    return (state.cur = string(ch))(stream, state);\r\n  if (ch == \"[\" && /[\\[=]/.test(stream.peek()))\r\n    return (state.cur = bracketed(readBracket(stream), \"string\"))(stream, state);\r\n  if (/\\d/.test(ch)) {\r\n    stream.eatWhile(/[\\w.%]/);\r\n    return \"number\";\r\n  }\r\n  if (/[\\w_]/.test(ch)) {\r\n    stream.eatWhile(/[\\w\\\\\\-_.]/);\r\n    return \"variable\";\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction bracketed(level, style) {\r\n  return function(stream, state) {\r\n    var curlev = null, ch;\r\n    while ((ch = stream.next()) != null) {\r\n      if (curlev == null) {if (ch == \"]\") curlev = 0;}\r\n      else if (ch == \"=\") ++curlev;\r\n      else if (ch == \"]\" && curlev == level) { state.cur = normal; break; }\r\n      else curlev = null;\r\n    }\r\n    return style;\r\n  };\r\n}\r\n\r\nfunction string(quote) {\r\n  return function(stream, state) {\r\n    var escaped = false, ch;\r\n    while ((ch = stream.next()) != null) {\r\n      if (ch == quote && !escaped) break;\r\n      escaped = !escaped && ch == \"\\\\\";\r\n    }\r\n    if (!escaped) state.cur = normal;\r\n    return \"string\";\r\n  };\r\n}\r\n\r\nexport const lua = {\r\n  name: \"lua\",\r\n\r\n  startState: function() {\r\n    return {basecol: 0, indentDepth: 0, cur: normal};\r\n  },\r\n\r\n  token: function(stream, state) {\r\n    if (stream.eatSpace()) return null;\r\n    var style = state.cur(stream, state);\r\n    var word = stream.current();\r\n    if (style == \"variable\") {\r\n      if (keywords.test(word)) style = \"keyword\";\r\n      else if (builtins.test(word)) style = \"builtin\";\r\n    }\r\n    if ((style != \"comment\") && (style != \"string\")){\r\n      if (indentTokens.test(word)) ++state.indentDepth;\r\n      else if (dedentTokens.test(word)) --state.indentDepth;\r\n    }\r\n    return style;\r\n  },\r\n\r\n  indent: function(state, textAfter, cx) {\r\n    var closing = dedentPartial.test(textAfter);\r\n    return state.basecol + cx.unit * (state.indentDepth - (closing ? 1 : 0));\r\n  },\r\n\r\n  languageData: {\r\n    indentOnInput: /^\\s*(?:end|until|else|\\)|\\})$/,\r\n    commentTokens: {line: \"--\", block: {open: \"--[[\", close: \"]]--\"}}\r\n  }\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
