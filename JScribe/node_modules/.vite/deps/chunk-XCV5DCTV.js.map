{
  "version": 3,
  "sources": ["../../@codemirror/legacy-modes/mode/z80.js"],
  "sourcesContent": ["function mkZ80(ez80) {\r\n  var keywords1, keywords2;\r\n  if (ez80) {\r\n    keywords1 = /^(exx?|(ld|cp)([di]r?)?|[lp]ea|pop|push|ad[cd]|cpl|daa|dec|inc|neg|sbc|sub|and|bit|[cs]cf|x?or|res|set|r[lr]c?a?|r[lr]d|s[lr]a|srl|djnz|nop|[de]i|halt|im|in([di]mr?|ir?|irx|2r?)|ot(dmr?|[id]rx|imr?)|out(0?|[di]r?|[di]2r?)|tst(io)?|slp)(\\.([sl]?i)?[sl])?\\b/i;\r\n    keywords2 = /^(((call|j[pr]|rst|ret[in]?)(\\.([sl]?i)?[sl])?)|(rs|st)mix)\\b/i;\r\n  } else {\r\n    keywords1 = /^(exx?|(ld|cp|in)([di]r?)?|pop|push|ad[cd]|cpl|daa|dec|inc|neg|sbc|sub|and|bit|[cs]cf|x?or|res|set|r[lr]c?a?|r[lr]d|s[lr]a|srl|djnz|nop|rst|[de]i|halt|im|ot[di]r|out[di]?)\\b/i;\r\n    keywords2 = /^(call|j[pr]|ret[in]?|b_?(call|jump))\\b/i;\r\n  }\r\n\r\n  var variables1 = /^(af?|bc?|c|de?|e|hl?|l|i[xy]?|r|sp)\\b/i;\r\n  var variables2 = /^(n?[zc]|p[oe]?|m)\\b/i;\r\n  var errors = /^([hl][xy]|i[xy][hl]|slia|sll)\\b/i;\r\n  var numbers = /^([\\da-f]+h|[0-7]+o|[01]+b|\\d+d?)\\b/i;\r\n\r\n  return {\r\n    name: \"z80\",\r\n    startState: function() {\r\n      return {\r\n        context: 0\r\n      };\r\n    },\r\n    token: function(stream, state) {\r\n      if (!stream.column())\r\n        state.context = 0;\r\n\r\n      if (stream.eatSpace())\r\n        return null;\r\n\r\n      var w;\r\n\r\n      if (stream.eatWhile(/\\w/)) {\r\n        if (ez80 && stream.eat('.')) {\r\n          stream.eatWhile(/\\w/);\r\n        }\r\n        w = stream.current();\r\n\r\n        if (stream.indentation()) {\r\n          if ((state.context == 1 || state.context == 4) && variables1.test(w)) {\r\n            state.context = 4;\r\n            return 'variable';\r\n          }\r\n\r\n          if (state.context == 2 && variables2.test(w)) {\r\n            state.context = 4;\r\n            return 'variableName.special';\r\n          }\r\n\r\n          if (keywords1.test(w)) {\r\n            state.context = 1;\r\n            return 'keyword';\r\n          } else if (keywords2.test(w)) {\r\n            state.context = 2;\r\n            return 'keyword';\r\n          } else if (state.context == 4 && numbers.test(w)) {\r\n            return 'number';\r\n          }\r\n\r\n          if (errors.test(w))\r\n            return 'error';\r\n        } else if (stream.match(numbers)) {\r\n          return 'number';\r\n        } else {\r\n          return null;\r\n        }\r\n      } else if (stream.eat(';')) {\r\n        stream.skipToEnd();\r\n        return 'comment';\r\n      } else if (stream.eat('\"')) {\r\n        while (w = stream.next()) {\r\n          if (w == '\"')\r\n            break;\r\n\r\n          if (w == '\\\\')\r\n            stream.next();\r\n        }\r\n        return 'string';\r\n      } else if (stream.eat('\\'')) {\r\n        if (stream.match(/\\\\?.'/))\r\n          return 'number';\r\n      } else if (stream.eat('.') || stream.sol() && stream.eat('#')) {\r\n        state.context = 5;\r\n\r\n        if (stream.eatWhile(/\\w/))\r\n          return 'def';\r\n      } else if (stream.eat('$')) {\r\n        if (stream.eatWhile(/[\\da-f]/i))\r\n          return 'number';\r\n      } else if (stream.eat('%')) {\r\n        if (stream.eatWhile(/[01]/))\r\n          return 'number';\r\n      } else {\r\n        stream.next();\r\n      }\r\n      return null;\r\n    }\r\n  };\r\n};\r\n\r\nexport const z80 = mkZ80(false)\r\nexport const ez80 = mkZ80(true)\r\n"],
  "mappings": ";AAAA,SAAS,MAAMA,OAAM;AACnB,MAAI,WAAW;AACf,MAAIA,OAAM;AACR,gBAAY;AACZ,gBAAY;AAAA,EACd,OAAO;AACL,gBAAY;AACZ,gBAAY;AAAA,EACd;AAEA,MAAI,aAAa;AACjB,MAAI,aAAa;AACjB,MAAI,SAAS;AACb,MAAI,UAAU;AAEd,SAAO;AAAA,IACL,MAAM;AAAA,IACN,YAAY,WAAW;AACrB,aAAO;AAAA,QACL,SAAS;AAAA,MACX;AAAA,IACF;AAAA,IACA,OAAO,SAAS,QAAQ,OAAO;AAC7B,UAAI,CAAC,OAAO,OAAO;AACjB,cAAM,UAAU;AAElB,UAAI,OAAO,SAAS;AAClB,eAAO;AAET,UAAI;AAEJ,UAAI,OAAO,SAAS,IAAI,GAAG;AACzB,YAAIA,SAAQ,OAAO,IAAI,GAAG,GAAG;AAC3B,iBAAO,SAAS,IAAI;AAAA,QACtB;AACA,YAAI,OAAO,QAAQ;AAEnB,YAAI,OAAO,YAAY,GAAG;AACxB,eAAK,MAAM,WAAW,KAAK,MAAM,WAAW,MAAM,WAAW,KAAK,CAAC,GAAG;AACpE,kBAAM,UAAU;AAChB,mBAAO;AAAA,UACT;AAEA,cAAI,MAAM,WAAW,KAAK,WAAW,KAAK,CAAC,GAAG;AAC5C,kBAAM,UAAU;AAChB,mBAAO;AAAA,UACT;AAEA,cAAI,UAAU,KAAK,CAAC,GAAG;AACrB,kBAAM,UAAU;AAChB,mBAAO;AAAA,UACT,WAAW,UAAU,KAAK,CAAC,GAAG;AAC5B,kBAAM,UAAU;AAChB,mBAAO;AAAA,UACT,WAAW,MAAM,WAAW,KAAK,QAAQ,KAAK,CAAC,GAAG;AAChD,mBAAO;AAAA,UACT;AAEA,cAAI,OAAO,KAAK,CAAC;AACf,mBAAO;AAAA,QACX,WAAW,OAAO,MAAM,OAAO,GAAG;AAChC,iBAAO;AAAA,QACT,OAAO;AACL,iBAAO;AAAA,QACT;AAAA,MACF,WAAW,OAAO,IAAI,GAAG,GAAG;AAC1B,eAAO,UAAU;AACjB,eAAO;AAAA,MACT,WAAW,OAAO,IAAI,GAAG,GAAG;AAC1B,eAAO,IAAI,OAAO,KAAK,GAAG;AACxB,cAAI,KAAK;AACP;AAEF,cAAI,KAAK;AACP,mBAAO,KAAK;AAAA,QAChB;AACA,eAAO;AAAA,MACT,WAAW,OAAO,IAAI,GAAI,GAAG;AAC3B,YAAI,OAAO,MAAM,OAAO;AACtB,iBAAO;AAAA,MACX,WAAW,OAAO,IAAI,GAAG,KAAK,OAAO,IAAI,KAAK,OAAO,IAAI,GAAG,GAAG;AAC7D,cAAM,UAAU;AAEhB,YAAI,OAAO,SAAS,IAAI;AACtB,iBAAO;AAAA,MACX,WAAW,OAAO,IAAI,GAAG,GAAG;AAC1B,YAAI,OAAO,SAAS,UAAU;AAC5B,iBAAO;AAAA,MACX,WAAW,OAAO,IAAI,GAAG,GAAG;AAC1B,YAAI,OAAO,SAAS,MAAM;AACxB,iBAAO;AAAA,MACX,OAAO;AACL,eAAO,KAAK;AAAA,MACd;AACA,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEO,IAAM,MAAM,MAAM,KAAK;AACvB,IAAM,OAAO,MAAM,IAAI;",
  "names": ["ez80"]
}
